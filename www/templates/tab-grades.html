<ion-view view-title="{{'global.grades' | translate}}">
    <ion-nav-buttons side="secondary">
        <ion-spinner ng-show="loading"></ion-spinner>
        <a class="button button-icon icon ion-ios-information-outline" ng-click="toggleInfoVisible()"></a>
    </ion-nav-buttons>
    <ion-content>
        <!-- <ion-refresher
            pulling-text="{{'global.pullToRefresh' | translate}}"
            on-refresh="doRefresh()">
        </ion-refresher> -->
        <ion-list>
            <cz-error-message visible="errorVisible">
                <div scroll="false" class="card">
                    <div class="item item-text-wrap error-message">
                        {{'mensa.cantload' | translate}}
                    </div>
                </div>
            </cz-error-message>

            <!-- group the dishes by its date -->
            <div ng-repeat="(key, value) in grades | groupBy: 'season'">
                <div class="item item-divider">
                    <!-- {{key | date: 'EEEE, dd.MM.yyyy'}} -->
                    {{key}}
                </div>
                <ion-item class="item-text-wrap" ng-repeat="grade in value">
                    <h3 class="float-left">{{grade.id}}</h3> <b class="float-right">{{ grade.grade }}</b>
                    <h2 class="clear-float">
                        <b>{{grade.name}}</b>
                    </h2>
                    <div class="dishes-allergens-additives">
                        <p ng-show="dish.allergens.length !== 0">ECTS: {{grade.ects}} |Â Date: {{grade.date}} | Bestanden: {{grade.passed}}</p>
                        <p ng-show="dish.additives.length !== 0">Attempt: {{grade.attempt}} |Â Season: {{grade.season}}</p>
                    </div>
                </ion-item>
            </div>

            </ion-item>
        </ion-list>
        <!--<ion-infinite-scroll
            on-infinite="loadMore()"
            distance="50%">
        </ion-infinite-scroll>-->
    </ion-content>
</ion-view>
